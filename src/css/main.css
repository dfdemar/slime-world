:root{
    --bg:#0b0f17;
    --panel:#101827;
    --panel-2:#0f1524;
    --text:#e6f0ff;
    --muted:#94a3b8;
    --accent:#7c3aed; /* vivid purple */
    --accent-2:#06b6d4; /* cyan */
    --accent-3:#f59e0b; /* amber */
    --good:#10b981; /* green */
    --bad:#ef4444; /* red */
    --warn:#f59e0b; /* amber */
}
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0; display:grid; grid-template-columns: 360px 1fr; grid-template-rows: auto 1fr; grid-template-areas:
"header header"
"left main";
    background: radial-gradient(1200px 700px at 20% -10%, #14203b 0%, #0b0f17 60%, #070a12 100%);
    color:var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
}
header{
    grid-area:header; padding:12px 16px; display:flex; align-items:center; gap:14px; border-bottom:1px solid #1f2a44;
    background: linear-gradient(180deg, rgba(124,58,237,0.15), rgba(6,182,212,0.05));
    backdrop-filter: blur(6px);
}
header h1{font-size:18px; margin:0; letter-spacing:0.3px}
.pill{font-size:12px; padding:4px 8px; border-radius:999px; background:rgba(6,182,212,0.15); color:#9be8ff; border:1px solid rgba(6,182,212,0.35)}
#status{font-size:12px; margin-left:8px; opacity:0.9}
#left{grid-area:left; padding:12px; overflow:auto; border-right:1px solid #1f2a44; background:linear-gradient(180deg, rgba(6,182,212,0.08), rgba(124,58,237,0.06));}
#main{grid-area:main; position:relative;}
.panel{background:linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid #263555; border-radius:16px; padding:14px; margin-bottom:12px; box-shadow: 0 6px 24px rgba(12,20,39,0.4), inset 0 0 0 1px rgba(255,255,255,0.02)}
.panel h2{font-size:14px; margin:0 0 10px 0; color:#c7d2fe; letter-spacing:0.4px}
.row{display:flex; align-items:center; justify-content:space-between; gap:8px; margin:8px 0}
.row label{font-size:12px; color:var(--muted)}
input[type=range]{width:160px}
.controls-grid{display:grid; grid-template-columns:1fr 1fr; gap:8px}
#spawnPanel .controls-grid{grid-template-columns:1fr 1fr}
.controls-grid button, .controls-grid .toggle{width:100%}
button{min-height:36px}
.spawn-active{outline:2px solid var(--accent-2); box-shadow:0 0 0 1px rgba(6,182,212,0.4) inset}
#overlay{position:absolute; top:12px; right:12px; width:340px; max-width:40vw;
    background:linear-gradient(180deg, rgba(2,6,23,0.92), rgba(2,6,23,0.72)); border:1px solid #1f2a44; border-radius:16px; padding:12px;}
#overlay.collapsed{width:180px; overflow:hidden}
#overlay.collapsed #inspector, #overlay.collapsed #stats, #overlay.collapsed #rtStats, #overlay.collapsed #miniView{display:none}
#overlay .icon{background:transparent; border:1px solid #2c3565; padding:4px 6px; border-radius:8px; font-size:12px}
button, .toggle{
    background: linear-gradient(180deg, #1f2442, #171c34);
    border: 1px solid #2c3565;
    color: #dfe6ff;
    padding: 8px 12px; border-radius: 12px; cursor: pointer; font-weight:600; letter-spacing:0.3px;
    box-shadow: 0 8px 20px rgba(31,40,84,0.35), inset 0 0 0 1px rgba(255,255,255,0.03);
}
button:hover{transform: translateY(-1px); box-shadow: 0 10px 24px rgba(31,40,84,0.45)}
button:active{transform: translateY(0)}
.toggle input{display:none}
.toggle span{display:inline-block; padding:8px 10px; border-radius:10px; background:rgba(124,58,237,0.12); border:1px solid rgba(124,58,237,0.35)}
.toggle input:checked + span{background: rgba(6,182,212,0.18); border-color: rgba(6,182,212,0.55)}
#canvas{display:block; image-rendering: pixelated; margin:12px;}
#stats{font-size:12px; color:#cbd5e1; display:grid; grid-template-columns: 1fr 1fr; gap:8px}
.rtgrid{display:grid; grid-template-columns:1fr 1fr; gap:8px; font-size:12px}
.kv{background:linear-gradient(180deg, #0e1424, #0a1220); border:1px solid #1c2847; border-radius:12px; padding:8px}
.kv .k{color:#9aa8c0; font-size:11px}
.kv .v{font-weight:700; color:#e6f0ff}
.stat{background:linear-gradient(180deg, #0e1424, #0a1220); border:1px solid #1c2847; border-radius:12px; padding:8px}
.legend{display:flex; flex-wrap:wrap; gap:6px}
.chip{display:flex; gap:6px; align-items:center; background:rgba(148,163,184,0.1); border:1px solid rgba(148,163,184,0.25); padding:6px 8px; border-radius:999px; font-size:12px}
.dot{width:10px; height:10px; border-radius:50%}
.kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px; background:#0f172a; border:1px solid #23335c; padding:2px 6px; border-radius:8px}
.small{font-size:12px; color:#9aa8c0}
#alert{position:fixed; top:8px; left:50%; transform:translateX(-50%); background:rgba(15,23,42,0.95); border:1px solid #2a3a66; color:#dbeafe; padding:8px 12px; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,0.35); display:none; z-index:9999}
#alert.warn{border-color:#7c5800; color:#fff3d1}
#alert.error{border-color:#5b1111; color:#ffe0e0}
#testResults{font-size:12px; color:#cbd5e1}
canvas#miniView{width:100%; height:140px; border:1px solid #1f2a44; border-radius:10px; background:linear-gradient(180deg,#0e1424,#0a1220)}